/* =========================================================
   P2P Share — Old Money Navy UI (no HTML changes required)
   ========================================================= */

/* Reset */
*,
*::before,
*::after { box-sizing: border-box; }
html, body { height: 100%; }
body, h1, h2, h3, p, figure { margin: 0; }
img, picture, video, canvas, svg { display: block; max-width: 100%; }
input, button, textarea, select { font: inherit; }
button { cursor: pointer; }
:focus { outline: none; }
:focus-visible { outline: 2px solid var(--focus); outline-offset: 2px; }

/* Layout skeleton to pin footer to bottom */
body {
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
}

/* Design tokens — Old Money Navy */
:root{
  /* Surfaces */
  --bg: #0a1322;           /* deep navy */
  --bg-2: #0d192c;         /* elevated navy */
  --card: #102038;         /* card navy */
  --glass: rgba(255,255,255,0.04);
  --glass-strong: rgba(255,255,255,0.08);

  /* Text */
  --text: #eaf0f6;         /* off-white blue */
  --muted: #a2b0c4;        /* slate blue */
  --subtle: #8b98ab;

  /* Accents (subtle, tasteful) */
  --accent-1: #7fb1ff;     /* soft azure */
  --accent-2: #58d0c7;     /* muted teal */
  --accent-gold: #d9cfae;  /* antique gold for tiny lines */

  /* States */
  --ok: #39d39c;
  --warn: #e9b358;
  --err: #ff6b6b;
  --info: #6aa9ff;

  /* Lines & focus */
  --line: #1c2a43;         /* navy border */
  --line-strong: #2a3b5e;
  --focus: #8ec8ff;

  /* Shadows */
  --sh-1: 0 6px 18px rgba(2,12,28,0.28);
  --sh-2: 0 12px 36px rgba(2,12,28,0.38);

  /* Radii */
  --r-sm: 8px;
  --r-md: 12px;
  --r-lg: 16px;
  --r-xl: 22px;
  --r-pill: 999px;

  /* Spacing (tight on mobile) */
  --s-1: 6px;
  --s-2: 10px;
  --s-3: 14px;
  --s-4: 18px;
  --s-5: 22px;
  --s-6: 28px;
  --s-7: 36px;

  /* Typography */
  --font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;

  --fs-xs: clamp(12px, 0.65vw + 9px, 13px);
  --fs-sm: clamp(13px, 0.7vw + 10px, 14px);
  --fs-md: clamp(15px, 0.85vw + 10px, 16px);
  --fs-lg: clamp(18px, 1.2vw + 12px, 20px);
  --fs-xl: clamp(24px, 1.6vw + 14px, 30px);
  --fs-2xl: clamp(30px, 2.2vw + 16px, 40px);

  /* Widths */
  --wrap: 980px;

  /* Progress */
  --bar-bg: rgba(255,255,255,0.07);
  --bar-fill: linear-gradient(90deg, #7fb1ff, #58d0c7);
}

@media (prefers-color-scheme: light) {
  :root{
    --bg: #f7f9fd;
    --bg-2: #ffffff;
    --card: #ffffff;
    --glass: rgba(0,0,0,0.03);
    --glass-strong: rgba(0,0,0,0.07);

    --text: #0c1a2e;
    --muted: #4a5a73;
    --subtle: #6b7a91;

    --line: rgba(10,19,34,0.12);
    --line-strong: rgba(10,19,34,0.2);

    --sh-1: 0 6px 18px rgba(12,26,46,0.08);
    --sh-2: 0 16px 42px rgba(12,26,46,0.12);

    --bar-bg: rgba(12,26,46,0.08);
  }
}

/* Base */
html { color-scheme: light dark; }
body{
  font-family: var(--font-sans);
  color: var(--text);
  background:
    radial-gradient(1000px 500px at 15% -10%, rgba(127,177,255,0.10), transparent 60%),
    radial-gradient(800px 600px at 120% 10%, rgba(88,208,199,0.08), transparent 60%),
    var(--bg);
  line-height: 1.45;
  font-size: var(--fs-md);
}

/* Smooth selection */
::selection { background: color-mix(in oklab, var(--accent-1) 28%, transparent); }

/* Scrollbar */
*::-webkit-scrollbar { width: 10px; height: 10px; }
*::-webkit-scrollbar-thumb { background: var(--glass-strong); border-radius: var(--r-pill); }

/* Header */
.app-header{
  position: sticky; top: 0; z-index: 40;
  backdrop-filter: saturate(1.1) blur(10px);
  background: linear-gradient(180deg, rgba(10,19,34,0.75), rgba(10,19,34,0.35), transparent);
  border-bottom: 1px solid var(--line);
}
.header-inner{
  max-width: var(--wrap);
  margin: 0 auto;
  padding: var(--s-3) var(--s-5);
  display: flex; align-items: center; justify-content: space-between; gap: var(--s-4);
}
.brand{
  text-decoration: none;
  font-weight: 800;
  letter-spacing: 0.2px;
  font-size: clamp(18px, 1.2vw + 14px, 22px);
  color: var(--text);
}

/* Nav pills */
.nav{
  display: flex; align-items: center; gap: 8px;
  padding: 4px;
  border: 1px solid var(--line);
  border-radius: var(--r-pill);
  background: color-mix(in oklab, var(--bg-2) 80%, transparent);
  box-shadow: var(--sh-1);
}
.nav-link{
  color: var(--muted);
  text-decoration: none;
  font-size: var(--fs-sm);
  padding: 8px 12px;
  border-radius: var(--r-pill);
  transition: background-color .2s ease, color .2s ease, transform .06s ease;
}
.nav-link:hover{ color: var(--text); background: var(--glass); }
.nav-link[aria-current="page"], .nav-link:active{
  color: var(--text);
  background: var(--glass-strong);
}

/* Main & footer — footer pinned bottom */
.app-main{
  flex: 1;                 /* pushes footer down */
  padding: var(--s-7) var(--s-5) var(--s-6);
}
.wrap{
  max-width: var(--wrap);
  margin: 0 auto;
  display: grid;
  gap: var(--s-6);
}
.app-footer{
  border-top: 1px solid var(--line);
  background: linear-gradient(0deg, rgba(10,19,34,0.45), transparent);
  padding: var(--s-4) var(--s-5);
  display: flex; justify-content: center; align-items: center;
}
.muted{ color: var(--subtle); font-size: var(--fs-sm); }

/* Headings */
h1{
  font-size: var(--fs-2xl);
  line-height: 1.15;
  letter-spacing: -0.02em;
  font-weight: 900;
  color: var(--text);
}

/* Cards (sections) */
.section{
  border: 1px solid var(--line);
  border-radius: var(--r-xl);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)),
    var(--card);
  box-shadow: var(--sh-1);
  padding: clamp(14px, 2vw + 8px, 22px);
  position: relative;
}
.section::before{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  background:
    linear-gradient(0deg, transparent, rgba(217,207,174,0.06) 2%, transparent 8%);
  mask: linear-gradient(#000, transparent 30%);
}

/* Rows */
.row{
  display: flex; align-items: center; gap: var(--s-4);
  flex-wrap: wrap;
}

/* Small text */
.small{ color: var(--muted); font-size: var(--fs-sm); }

/* Code display */
.code{
  font-family: var(--font-mono);
  font-size: clamp(28px, 3vw + 14px, 44px);
  letter-spacing: 0.14em;
  font-weight: 800;
  color: var(--text);
  padding: 10px 14px;
  text-align: center;
  min-width: 12ch;
  border-radius: var(--r-lg);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)),
    var(--bg-2);
  border: 1px dashed color-mix(in oklab, var(--line) 70%, var(--accent-gold) 30%);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
  user-select: all;
}

/* QR holder — keep white for contrast with QR modules */
.qr{
  width: min(260px, 60vw);
  padding: 12px;
  border-radius: var(--r-lg);
  background: #fff;
  border: 1px solid var(--line);
  box-shadow: var(--sh-1);
}

/* Inputs */
.input, input[type="text"], input[type="file"]{
  width: min(420px, 100%);
  color: var(--text);
  background: color-mix(in oklab, var(--bg-2) 75%, transparent);
  border: 1px solid var(--line);
  border-radius: var(--r-lg);
  padding: 12px 14px;
  transition: border-color .18s ease, box-shadow .18s ease, background-color .18s ease, transform .06s ease;
}
.input::placeholder{ color: var(--subtle); }
.input:hover{ border-color: var(--line-strong); }
.input:focus-visible{
  border-color: color-mix(in oklab, var(--focus) 55%, var(--line));
  box-shadow: 0 0 0 6px color-mix(in oklab, var(--focus) 18%, transparent);
}
input[type="file"]{
  padding: 10px 12px;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)),
    var(--bg-2);
}

/* Buttons */
.btn{
  --btn-fg: #0d1526;
  color: var(--btn-fg);
  background: linear-gradient(180deg, #9cc6ff, #7fb1ff);
  border: 0;
  border-radius: var(--r-pill);
  padding: 12px 18px;
  font-weight: 800;
  letter-spacing: 0.2px;
  display: inline-flex; align-items: center; justify-content: center; gap: 10px;
  box-shadow: 0 8px 22px rgba(127,177,255,0.35);
  transition: transform .08s ease, box-shadow .18s ease, filter .18s ease;
}
.btn:hover{ filter: saturate(1.04) brightness(1.02); box-shadow: 0 10px 28px rgba(127,177,255,0.42); }
.btn:active{ transform: translateY(1px) scale(0.99); }
.btn:disabled{
  opacity: .55; cursor: not-allowed; box-shadow: none; filter: grayscale(0.2);
}

/* Secondary button variant if ever added */
.btn.secondary{
  color: var(--text);
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border: 1px solid var(--line);
  box-shadow: none;
}

/* Progress */
.progress{
  --h: 12px;
  width: min(560px, 100%);
  height: var(--h);
  background: var(--bar-bg);
  border-radius: var(--r-pill);
  overflow: hidden;
  border: 1px solid var(--line);
  position: relative;
}
.bar{
  height: 100%;
  background: var(--bar-fill);
  background-size: 200% 100%;
  transform-origin: left center;
  transition: width .25s ease;
}
@media (prefers-reduced-motion: no-preference){
  .bar{ animation: barShift 2.8s linear infinite; }
}
@keyframes barShift{
  0%{ background-position: 0% 50%; }
  100%{ background-position: 200% 50%; }
}

#recvText, #sendText{ color: var(--muted); }

/* Notices */
.notice{
  border: 1px solid var(--line-strong);
  border-left: 4px solid var(--info);
  background:
    linear-gradient(180deg, rgba(106,169,255,0.10), rgba(106,169,255,0.04)),
    var(--card);
  color: var(--text);
  border-radius: var(--r-lg);
  padding: 14px 16px;
  box-shadow: var(--sh-1);
}
.notice.ok{ border-left-color: var(--ok); }
.notice.warn{ border-left-color: var(--warn); }
.notice.err{ border-left-color: var(--err); }

/* Download links generated into #downloads */
#downloads > a{
  display: inline-flex; align-items: center; gap: 10px;
  margin: 8px 10px 0 0;
  padding: 10px 14px;
  border-radius: var(--r-pill);
  border: 1px solid var(--line);
  text-decoration: none;
  color: var(--text);
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  transition: border-color .18s ease, transform .06s ease, box-shadow .18s ease;
}
#downloads > a:hover{ border-color: var(--line-strong); box-shadow: var(--sh-1); }
#downloads > a:active{ transform: translateY(1px); }

/* Micro-interactions */
@media (prefers-reduced-motion: no-preference){
  .section{
    animation: cardIn .45s ease both;
  }
  @keyframes cardIn{
    from{ opacity: 0; transform: translateY(8px) scale(0.995); }
    to{ opacity: 1; transform: translateY(0) scale(1); }
  }
}

/* Hit targets */
.btn, .input, .nav-link, #downloads > a{ min-height: 44px; }

/* Attach copy button visually near code */
#copyCode.btn{ white-space: nowrap; padding-inline: 14px; }

/* QR spacing */
#qr.qr{ margin-top: 8px; }

/* Responsive tuning — minimal extra gaps on phones */
@media (max-width: 720px){
  .header-inner{ padding: var(--s-3) var(--s-3); }
  .nav{ gap: 6px; padding: 2px; }
  .nav-link{ padding: 8px 10px; font-size: var(--fs-xs); }

  .app-main{ padding: var(--s-6) var(--s-3) var(--s-5); }
  .wrap{ gap: var(--s-5); }
  .section{ border-radius: var(--r-lg); padding: 14px 16px; }

  .row{ gap: var(--s-3); }
  .btn{ padding: 12px 16px; }
  .progress{ --h: 14px; }
  .qr{ width: min(72vw, 320px); }
}

/* Graceful fallback if no backdrop-filter */
@supports not (backdrop-filter: blur(6px)){
  .app-header{ background: linear-gradient(180deg, rgba(10,19,34,0.95), rgba(10,19,34,0.6)); }
}

/* Print clean */
@media print{
  .app-header, .app-footer, .nav, .btn{ display: none !important; }
  .section{ box-shadow: none; border-color: #ccc; }
  body{ background: #fff; color: #000; }
}
